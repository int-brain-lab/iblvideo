Some useful commands to crop and check your videos using ffmpeg
(https://www.ffmpeg.org/download.html#build-linux)

## check individual frames of video in ipython
import pims
v = pims.Video('video.avi')
imshow(v[0])

## check if crop is good
ffplay -i video.avi -vf "crop=out_w:out_h:x:y"

##crop one video nearly lossless
ffmpeg -i input.mp4 -vf "crop=out_w:out_h:x:y" -c:v libx264 -crf 17 -c:a copy output.mp4
ffmpeg -y -hide_banner -i "test.avi" -filter:v "crop=iw-400:ih-40,scale=960:720" -pix_fmt yuv420p output_video.avi


## crop all videos lossless in folder 
for i in *.avi; do ffmpeg -i "$i" -vf "crop=out_w:out_h:x:y" -c:v libx264 -crf 0 -c:a copy ../smaller/"${i%.*}.avi"; done

## from any format (.ANY) to mp4 (CPU only) [crf is quality, 0 best, 51 worst]
ffmpeg -i movie.ANY -c:a aac -b:a 128k -c:v libx264 -crf 23 movie.mp4

## from any format (.ANY) to mp4 (GPU) [quality settings are more involved]
ffmpeg -hwaccel cuvid -i input.avi -c:v h264_nvenc -rc vbr_hq -b:v 8M -maxrate:v 10M output.mp4

## make gifs (first make palette.png then gif)

ffmpeg -y -ss 0 -t 4 -i video.mp4 -vf fps=10,scale=320:-1:flags=lanczos,palettegen palette.png
ffmpeg -ss 0 -t 4 -i video.mp4 -i palette.png -filter_complex "fps=10,scale=320:-1:flags=lanczos[x];[x][1:v]paletteuse" video.gif

## video to png images
ffmpeg -i input.mp4 -vf fps=1 out%d.pn

## rotate and compress 
ffmpeg -i original.mp4 -vf "transpose=1" -codec:v libx264 -preset slow -crf 20 -codec:a copy flipped.mp4

For the transpose parameter you can pass:

0 = 90CounterCLockwise and Vertical Flip (default) 
1 = 90Clockwise 
2 = 90CounterClockwise 
3 = 90Clockwise and Vertical Flip

## Apply an ffmpeg command to all videos in a folder (here e.g. cutting)
for i in *.mp4; do ffmpeg -i "$i" -vcodec libx264 -crf 0 -ss 00:00:00 -t 00:10:00 "../short/${i}"; done

## Mosaic of 4 videos side-by-side
ffmpeg -i input0 -i input1 -i input2 -i input3 -filter_complex "[0:v][1:v]hstack[top];[2:v][3:v]hstack[bottom];[top][bottom]vstack[v]" -map "[v]" output

## Change resolution of frames
ffmpeg -i input.avi -vf scale=320:240 output.avi
for i in *.mp4; do ffmpeg -i "$i" -vcodec libx264 -crf 0 -ss 00:00:00 -t 00:10:00 -vf scale=640:512 "small/${i}"; done

## Counts the number of frames of a video
ffprobe -v error -count_frames -select_streams v:0 -show_entries stream=nb_read_frames -of default=nokey=1:noprint_wrappers=1 input.mkv

